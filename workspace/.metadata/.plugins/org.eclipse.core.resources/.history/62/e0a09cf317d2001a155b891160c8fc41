/*
 * CREATED ON:    Apr 14, 2006 4:05:59 PM
 * CREATED BY:    Amit Bansil 
 */
package cps.water.moleculedisplay;

import cps.jarch.data.value.ROValue;
import cps.jarch.data.value.RWValue;
import cps.jarch.data.value.tools.BoundedValue;
import cps.jarch.data.value.tools.RWFlag;
import cps.jarch.gui.util.ComponentProxy;
import cps.water.ControlFactory;
import cps.water.Model;

import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.JComponent;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSpinner;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Insets;
import java.awt.Point;

/**
 * <p>A {@link ComponentProxy} that edits a {@link DisplayModel}.
 * </p>
 * @version $Id$
 * @author Amit Bansil
 */
public final class DisplayControls implements ComponentProxy{
	private final JComponent panel;
	private final ROValue<Model> controlledModel;
	public final JComponent getComponent() {
		return panel;
	}
	public DisplayControls(ROValue<Model> controlledModel) {
		// components

		// layout
		panel = new JPanel(new BorderLayout(0, 0));
		Box left = Box.createHorizontalBox();
		Box right = Box.createHorizontalBox();

		left.add(ControlFactory
			.stickTogether(
				ControlFactory.createToggleButton(shrinkAtoms, "Shrink Atoms"),
				ControlFactory.createToggleButton(spinDisplay, "Spin Display"));
		left.add(ControlFactory.hSpace(ControlFactory.MED_SPACE));
		left.add(new JLabel("Zoom"));
		JSpinner zoomSp=ControlFactory.createFloatSpinner(5f, zooom);
		left.add(ControlFactory.createFloatSlider(zoomSp, 2f));
		left.add(ControlFactory.hSpace(ControlFactory.MED_SPACE));
		right.add(ControlFactory.createToolbarButton("Recenter, al))
		this.controlledModel = controlledModel;
	}
	// ------------------------------------------------------------------------

	private final RWFlag shrinkAtoms=new RWFlag(true),
		spinDisplay=new RWFlag(true);
	private final BoundedValue<Float> zooom=new BoundedValue<Float>(50f,0f,100f);
	private final RWValue<ColorScheme> 
	private final void recenter() {
		
	}
	//determine layout
	private static final Point determinePopupLocation(Point componentLocation,
			Dimension componentSize,Dimension popupSize,Dimension screenSize) {
		boolean leftAlign=true;//otherwise right
		boolean bottomAlign=true;//otherwise top
		//if right edge offscreen right align
		if(componentLocation.x+popupSize.getWidth()>screenSize.width)leftAlign=false;
		//if bottom edge offscreen top align
		if(componentLocation.y+componentSize.getHeight()+popupSize.height>screenSize.width)bottomAlign=false;
		
		Point ret=new Point();
		if(leftAlign)ret.x=componentLocation.x;
		else ret.x=(componentLocation.x+componentSize.width)-popupSize.width;
		
		if(bottomAlign)ret.y=componentLocation.y+componentSize.height;
		else ret.y=componentLocation.y-popupSize.height;
		
		return ret;
	}
}
