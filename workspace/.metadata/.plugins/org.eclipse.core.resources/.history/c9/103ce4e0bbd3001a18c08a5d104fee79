/*
 * BoxDrawer.java
 * CREATED:    Aug 23, 2004 9:14:53 PM
 * AUTHOR:     Amit Bansil
 * PROJECT:    vmdl2
 * 
 * Copyright 2004 The Center for Polymer Studies,
 * Boston University, all rights reserved.
 * */
package cps.water.moleculedisplay;

import cps.water.moleculedisplay.GLAccess.DisplayList;
import cps.water.moleculedisplay.GLAccess.LineDrawer;

import javax.media.opengl.GL;
import javax.vecmath.Tuple3f;

/**
 * TODO: label axes
 * 
 * @version 0.0
 * @author Amit Bansil
 */
public class BoxDrawer{
	private DisplayList displayList;

	public void kill(GLAccess gla) {
		displayList.kill();
		displayList=null;
	}

	public void init(GLAccess gla) {
		displayList=gla.beginList();
		
		LineDrawer l=gla.beginLines();
		//gl.glNormal3f(0,0,1);
		gla.setColor(Renderer.boxColor);
		
		//front
		l.drawLine(0.0f, 0.0f, 0.0f,1.0f, 0.0f, 0.0f);
		l.drawLine(0.0f, 0.0f, 0.0f,0.0f, 1.0f, 0.0f);
		l.drawLine(1.0f, 1.0f, 0.0f,1.0f, 0.0f, 0.0f);
		l.drawLine(1.0f, 1.0f, 0.0f,0.0f, 1.0f, 0.0f);
		//back
		l.drawLine(0.0f, 0.0f, 1.0f,1.0f, 0.0f, 1.0f);
		l.drawLine(0.0f, 0.0f, 1.0f,0.0f, 1.0f, 1.0f);
		l.drawLine(1.0f, 1.0f, 1.0f,1.0f, 0.0f, 1.0f);
		l.drawLine(1.0f, 1.0f, 1.0f,0.0f, 1.0f, 1.0f);
		
		//connection
		l.drawLine(1.0f, 1.0f, 0.0f,1.0f, 1.0f, 1.0f);
		l.drawLine(1.0f, 0.0f, 0.0f,1.0f, 0.0f, 1.0f);
		l.drawLine(0.0f, 1.0f, 0.0f,0.0f, 1.0f, 1.0f);
		l.drawLine(0.0f, 0.0f, 0.0f,0.0f, 0.0f, 1.0f);

		l.end();
		
		displayList.end();
	}

	//OPTIMIZE-create second display list for all commands?
	//push geometry faster
	
	//gl.glTranslatef(ox, oy, oz);
	//gl.glScalef(sx, sy, sz);
	public void draw(GLAccess gla,Tuple3f size) {
		gla.pushMatrix();
		gla.scale(size.x, size.y, size.z);
		gla.setLightingEnabled(false);
		displayList.call();
		gla.popMatrix();
	}

}